<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jonas Assistance - IA</title>
  <style>
    /* Design sombre et moderne */
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #121212;
      color: #e0e0e0;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    header {
      background-color: #1f1f1f;
      padding: 1rem;
      text-align: center;
      font-size: 1.8rem;
      font-weight: bold;
      letter-spacing: 1px;
      color: #90caf9;
      box-shadow: 0 2px 5px rgba(0,0,0,0.7);
    }
    #chat {
      flex-grow: 1;
      overflow-y: auto;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .message {
      max-width: 75%;
      padding: 10px 15px;
      border-radius: 12px;
      line-height: 1.3;
      word-wrap: break-word;
    }
    .user {
      align-self: flex-end;
      background: #64b5f6;
      color: #000;
      border-bottom-right-radius: 0;
    }
    .bot {
      align-self: flex-start;
      background: #333;
      color: #eee;
      border-bottom-left-radius: 0;
    }
    footer {
      background-color: #1f1f1f;
      padding: 10px;
      display: flex;
      gap: 10px;
    }
    input[type="text"] {
      flex-grow: 1;
      border: none;
      padding: 12px;
      font-size: 1rem;
      border-radius: 20px;
      outline: none;
      background-color: #222;
      color: #eee;
      transition: background-color 0.3s ease;
    }
    input[type="text"]:focus {
      background-color: #333;
    }
    button {
      background-color: #90caf9;
      border: none;
      border-radius: 20px;
      padding: 12px 20px;
      font-size: 1rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
      color: #000;
      font-weight: bold;
    }
    button:hover {
      background-color: #64b5f6;
    }
    /* Popup pour ajouter réponse */
    #addAnswerPopup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #222;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 0 15px #90caf9;
      display: none;
      flex-direction: column;
      gap: 10px;
      z-index: 1000;
      width: 90%;
      max-width: 400px;
    }
    #addAnswerPopup textarea {
      width: 100%;
      height: 80px;
      border-radius: 8px;
      border: none;
      background-color: #333;
      color: #eee;
      padding: 10px;
      font-size: 1rem;
      resize: none;
      outline: none;
    }
    #addAnswerPopup button {
      align-self: flex-end;
      background-color: #90caf9;
      color: #000;
      padding: 8px 16px;
      border-radius: 20px;
      font-weight: 600;
    }
    #overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      display: none;
      z-index: 900;
    }
  </style>
</head>
<body>

<header>Jonas Assistance</header>

<div id="chat"></div>

<footer>
  <input id="userInput" type="text" placeholder="Pose ta question..." autocomplete="off" />
  <button id="sendBtn">Envoyer</button>
</footer>

<div id="overlay"></div>
<div id="addAnswerPopup">
  <div>Je ne connais pas la réponse, peux-tu me la donner ?</div>
  <textarea id="newAnswerInput" placeholder="Ta réponse ici..."></textarea>
  <button id="saveAnswerBtn">Enregistrer</button>
</div>

<script>
  // Base initiale avec 200 questions/réponses simplifiées (extrait ici, tu peux compléter)
  const initialBase = {
    "bonjour": "Bonjour ! Comment puis-je t’aider ?",
    "salut": "Salut !",
    "comment vas-tu": "Je vais bien, merci.",
    "qui es-tu": "Je suis Jonas Assistance, ton assistant intelligent.",
    "qui est ton créateur": "Mon créateur est Jonas Sleiman.",
    "quelle est la capitale de la france": "La capitale de la France est Paris.",
    "quelle est la capitale du japon": "La capitale du Japon est Tokyo.",
    "quel est le plus haut sommet du monde": "L’Everest est le plus haut sommet du monde.",
    "qui est albert einstein": "Albert Einstein est un physicien célèbre pour la théorie de la relativité.",
    "quel âge a la terre": "La Terre a environ 4,5 milliards d’années.",
    "quelle est la vitesse de la lumière": "Environ 299 792 km/s.",
    "qui a inventé internet": "Tim Berners-Lee est un des pionniers d’Internet.",
    "combien de continents existe-t-il": "Il y a 7 continents sur Terre.",
    "quel est le plus grand désert": "L’Antarctique est le plus grand désert du monde.",
    "quelle est la formule de l'eau": "La formule chimique de l'eau est H₂O.",
    "qui a découvert l'amérique": "Christophe Colomb est souvent crédité de la découverte de l'Amérique en 1492.",
    // ... ajoute ici plein d'autres questions (200 au total)
  };

  // Chargement base depuis localStorage ou initialBase
  let base = JSON.parse(localStorage.getItem('jonas_base'));
  if (!base) {
    base = initialBase;
    localStorage.setItem('jonas_base', JSON.stringify(base));
  }

  const chat = document.getElementById("chat");
  const userInput = document.getElementById("userInput");
  const sendBtn = document.getElementById("sendBtn");
  const addAnswerPopup = document.getElementById("addAnswerPopup");
  const newAnswerInput = document.getElementById("newAnswerInput");
  const saveAnswerBtn = document.getElementById("saveAnswerBtn");
  const overlay = document.getElementById("overlay");

  let pendingQuestion = null;

  function addMessage(text, sender) {
    const msgDiv = document.createElement("div");
    msgDiv.classList.add("message", sender);
    msgDiv.textContent = text;
    chat.appendChild(msgDiv);
    chat.scrollTop = chat.scrollHeight;
  }

  function normalize(text) {
    return text.trim().toLowerCase().replace(/[\u0300-\u036f]/g, ""); // enlever accents
  }

  function askQuestion(question) {
    const normalized = normalize(question);
    if (base[normalized]) {
      addMessage(base[normalized], "bot");
    } else {
      pendingQuestion = normalized;
      showAddAnswerPopup();
    }
  }

  function showAddAnswerPopup() {
    overlay.style.display = "block";
    addAnswerPopup.style.display = "flex";
    newAnswerInput.value = "";
    newAnswerInput.focus();
  }

  function hideAddAnswerPopup() {
    overlay.style.display = "none";
    addAnswerPopup.style.display = "none";
  }

  sendBtn.onclick = () => {
    const question = userInput.value.trim();
    if (!question) return;
    addMessage(question, "user");
    askQuestion(question);
    userInput.value = "";
  };

  userInput.addEventListener("keypress", function(e) {
    if (e.key === "Enter") {
      sendBtn.click();
    }
  });

  saveAnswerBtn.onclick = () => {
    const answer = newAnswerInput.value.trim();
    if (!answer) {
      alert("Merci de fournir une réponse !");
      return;
    }
    base[pendingQuestion] = answer;
    localStorage.setItem('jonas_base', JSON.stringify(base));
    addMessage(answer, "bot");
    pendingQuestion = null;
    hideAddAnswerPopup();
  };

  // Accueil
  addMessage("Bonjour ! Je suis Jonas Assistance, pose-moi une question.", "bot");
</script>

</body>
</html>







